20251031 - swagger docs

==============================================================================

npm init @eslint/config@latest
npm install express
npm install -D nodemon
npm install cors
npm install pino-http pino-pretty
npm install dotenv
npm install bcrypt
npm install cookie-parser
npm install nodemailer
npm install jsonwebtoken
npm i multer
npm i cloudinary

У файлі package.json відсутнє необхідне поле "dev": "nodemon src/server.js". Перевірте, будь ласка, що ви додали повний запис "dev": "nodemon src/server.js" у відповідному форматі (з подвійними лапками).

dz2

Завдання вирішено неправильно (файл src/models/note.js)
У полях title та content відсутня опція trim: true.
Поле content не має значення за замовчуванням — порожній рядок.
Поле tag позначене як required: true, але воно має бути необов’язковим із значенням за замовчуванням 'Todo'.

Завдання вирішено неправильно (файл src/controllers/notesController.js)
Контролер deleteNote використовує res.status(200).send(deletedNote); замість res.status(200).json(deletedNote); для узгодженості з іншими відповідями.

dz3
Завдання вирішено неправильно (файл src/models/note.js)
Константа TAGS не імпортується з ../constants/tags.js із необхідним розширенням файлу; замість цього enum-значення жорстко зафіксовані у коді.
Включено опцію versionKey: false, яка не зазначена як обов'язкова.

Завдання вирішено неправильно (файл src/controllers/notesController.js)
Функція getAllNotes формує фільтр запиту як звичайний об'єкт і передає його у Mongoose методи, замість використання Mongoose chain-запитів, таких як .find().where().or(). Це не відповідає вимозі використання

Завдання вирішено неправильно (файл src/validations/notesValidation.js)
Поле search у getAllNotesSchema повинно дозволяти порожні рядки, але наразі встановлено лише мінімальну довжину 0. Щоб явно дозволити порожні рядки, слід використовувати .allow('').
Поле content як у createNoteSchema, так і у updateNoteSchema повинно явно дозволяти порожні рядки. Зараз використовується лише .min(0), що не дозволяє порожні рядки без явного додавання .allow('').

Завдання вирішено неправильно (файл src/routes/notesRoutes.js)
Схема для валідації noteId імпортується як noteIdSchema, але використовується як noteIdSchema у коді, тоді як у специфікації ця назва — noteIdSchema. Будь ласка, забезпечте послідовність назв для зрозумілості та підтримуваності.

Завдання вирішено неправильно (файл src/controllers/notesController.js)
Контролер getAllNotes використовує $text пошук для параметра search. За специфікацією потрібно реалізувати нечутливий до регістру пошук підрядка у полях title та content, а не пошук за текстовим індексом. Поточна реалізація не підходить для пошуку підрядків або у випадку, коли текстовий індекс не визначено.
Контролер getAllNotes містить параметри запиту sortBy і sortOrder, але вони не входять до вимог. Хоча це не є порушенням, їхня наявність є зайвою.
Контролер getAllNotes не використовує ланцюжок запитів Mongoose для фільтрації пошуку; натомість передає звичайний об’єкт до .where(). Вимога полягає у використанні методів ланцюжків, таких як .or(), для побудови умови пошуку.
Контролер getAllNotes не гарантує, що perPage та page є числами при використанні у розрахунках і відповідях. Хоча параметри й валідовані, деструктуризація з req.query може все одно надати рядки, якщо це не оброблено middleware валідації як числа.

dz4:
=1=
Завдання вирішено неправильно (файл src/server.js)
Пункти, що потребують доопрацювання:

Сервер слухає на process.env.PORT ?? 3030, але за замовчуванням має бути 3000, якщо PORT не встановлено.

Завдання вирішено неправильно (файл src/models/user.js)
Пункти, які потребують доопрацювання:

Поле у схемі та пре-хуці називається userName, але має бути username, щоб відповідати призначеній назві поля. Така неузгодженість може призвести до проблем при доступі або встановленні цього поля в інших частинах застосунку.
Модель експортується як User, але ім'я колекції встановлено як 'user' (малими літерами, в однині). Для узгодженості та зрозумілості рекомендовано використовувати 'User' (з великої літери, в однині) або 'Users' (у множині), але це не є суворою помилкою.

Завдання вирішено неправильно (файл src/models/note.js)
Поле userId визначене як String, проте воно має бути типу Schema.Types.ObjectId для коректного посилання на модель User.

Завдання вирішено неправильно (файл src/middleware/authenticate.js)
Коли користувача не знайдено, middleware повертає помилку 401 із повідомленням 'Access denied'. Очікувана поведінка — повернути помилку 401 без будь-якого повідомлення у цьому випадку.

Завдання вирішено неправильно (файл src/controllers/authController.js)
У registerUser відповідь повертає { newUser } як JSON тіло. Це вміщує об'єкт користувача під ключем newUser, тоді як у loginUser об'єкт користувача повертається напряму. Для послідовності й зрозумілості обидва мають повертати об'єкт користувача напряму (тобто, res.status(201).json(newUser)).
У refreshUserSession повідомлення про помилку для відсутніх cookies — 'Error getting auth cookies'. Точніше буде використати повідомлення 'Missing authentication cookies'.

Завдання вирішено неправильно (файл src/controllers/notesController.js)
Пункти, що потребують доопрацювання:

Контролер getAllNotes використовує notesQuery.where({ $text: { $search: search } }) для текстового пошуку. Проте, .where() з об'єктом — це некоректний спосіб застосування $text-пошуку в Mongoose. Замість цього слід використовувати .find({ $text: { $search: search } }) або .where('$text').equals({ $search: search }). Будь ласка, відкоригуйте запит для коректного застосування оператора $text пошуку.
Контролери getNoteById, deleteNote та updateNote використовують блоки try-catch для обробки помилок, тоді як інші контролери цього не роблять. Для послідовності та відповідності автоматичній обробці помилок у Express 5, будь ласка, приберіть блоки try-catch і дозвольте помилкам природно розповсюджуватись.

=2=

Завдання вирішено неправильно (файл src/server.js)
Сервер слухає на process.env.PORT ?? 3030, але за замовчуванням має бути 3000, якщо PORT не встановлено.

Завдання вирішено неправильно (файл src/routes/authRoutes.js)
Запит POST /auth/register з вже існуючим користувачем повертає html помилку 400 Bad Request

Завдання вирішено неправильно (файл src/controllers/notesController.js)
Контролер getAllNotes використовує Number(perPage) та Number(page) для пагінації, але оскільки ці значення вже валідовані й передані як числа, ця конвертація є зайвою.

dz5

Завдання вирішено неправильно (файл src/models/user.js)
Значення за замовчуванням для поля avatar встановлено як "<https://ac.goit.global/fullstack/react/default-avatar.jpg>" (з кутовими дужками). Кутові дужки потрібно видалити, щоб значенням за замовчуванням був звичайний рядок з URL.

Завдання вирішено неправильно (файл src/controllers/authController.js)
У resetPassword, якщо користувача не знайдено, функція повертає createHttpError(400, "user not found"), але не відправляє і не викидає цю помилку, що не призведе до відповіді з помилкою. Помилку потрібно кинути або передати в next(), щоб забезпечити коректну обробку помилок.

Завдання вирішено неправильно (файл src/routes/userRoutes.js)
Шлях маршруту — /user/me/avatar, але має бути /users/me/avatar (зверніть увагу на множину "users").
Фінальне рішення:

Завдання не прийнято
